### ============================================
### INTERN REGISTER SYSTEM - BACKEND API TESTING
### ============================================
### Use this file in VS Code with REST Client extension or Postman/Insomnia
### 
### IMPORTANT: Replace variables at the top before testing
### ============================================

@baseUrl = http://localhost:8082
@token = YOUR_TOKEN_HERE

### ============================================
### 1. AUTHENTICATION ENDPOINTS
### ============================================

### Send Verification Code
POST {{baseUrl}}/api/auth/send-verification-code
Content-Type: application/json

{
  "email": "test@univen.ac.za"
}

### Verify Code
POST {{baseUrl}}/api/auth/verify-code
Content-Type: application/json

{
  "email": "test@univen.ac.za",
  "code": "123456"
}

### Register - ADMIN
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "admin@univen.ac.za",
  "password": "Admin123!",
  "role": "ADMIN",
  "verificationCode": "123456",
  "name": "Admin",
  "surname": "User"
}

### Register - SUPERVISOR
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "supervisor@univen.ac.za",
  "password": "Supervisor123!",
  "role": "SUPERVISOR",
  "verificationCode": "123456",
  "name": "Supervisor",
  "surname": "User",
  "department": "ICT"
}

### Register - INTERN
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "intern@univen.ac.za",
  "password": "Intern123!",
  "role": "INTERN",
  "verificationCode": "123456",
  "name": "Intern",
  "surname": "User",
  "department": "ICT"
}

### Login - ADMIN
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin@univen.ac.za",
  "password": "Admin123!"
}

### Login - SUPERVISOR
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "supervisor@univen.ac.za",
  "password": "Supervisor123!"
}

### Login - INTERN
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "intern@univen.ac.za",
  "password": "Intern123!"
}

### Get Current User (Requires Auth)
GET {{baseUrl}}/api/auth/me
Authorization: Bearer {{token}}

### ============================================
### 2. INTERN ENDPOINTS (Requires Auth)
### ============================================

### Get All Interns
GET {{baseUrl}}/api/interns
Authorization: Bearer {{token}}

### Search Interns
GET {{baseUrl}}/api/interns/search?name=John&page=0&size=10
Authorization: Bearer {{token}}

### Get Intern by ID
GET {{baseUrl}}/api/interns/1
Authorization: Bearer {{token}}

### Create Intern
POST {{baseUrl}}/api/interns
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "New Intern",
  "email": "newintern@univen.ac.za",
  "departmentId": 1,
  "supervisorId": 1
}

### Update Intern
PUT {{baseUrl}}/api/interns/1
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Updated Intern Name",
  "email": "updated@univen.ac.za"
}

### Delete Intern
DELETE {{baseUrl}}/api/interns/1
Authorization: Bearer {{token}}

### ============================================
### 3. ATTENDANCE ENDPOINTS (Requires Auth)
### ============================================

### Get All Attendance Records
GET {{baseUrl}}/api/attendance
Authorization: Bearer {{token}}

### Get Attendance by Intern ID
GET {{baseUrl}}/api/attendance/intern/1
Authorization: Bearer {{token}}

### Sign In
POST {{baseUrl}}/api/attendance/signin
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "internId": 1,
  "location": "Main Building"
}

### Sign Out
PUT {{baseUrl}}/api/attendance/signout/1
Authorization: Bearer {{token}}

### ============================================
### 4. LEAVE REQUEST ENDPOINTS (Requires Auth)
### ============================================

### Get All Leave Requests
GET {{baseUrl}}/api/leave
Authorization: Bearer {{token}}

### Get Leave Requests by Status
GET {{baseUrl}}/api/leave?status=PENDING
Authorization: Bearer {{token}}

### Get Leave Requests by Intern ID
GET {{baseUrl}}/api/leave/intern/1
Authorization: Bearer {{token}}

### Search Leave Requests (Paginated)
GET {{baseUrl}}/api/leave/search?status=PENDING&internId=1&page=0&size=10
Authorization: Bearer {{token}}

### Submit Leave Request
POST {{baseUrl}}/api/leave
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "internId": 1,
  "fromDate": "2024-12-01",
  "toDate": "2024-12-05",
  "reason": "Personal leave",
  "leaveType": "ANNUAL"
}

### Upload Leave Attachment
POST {{baseUrl}}/api/leave/1/attachment
Authorization: Bearer {{token}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary

------WebKitFormBoundary
Content-Disposition: form-data; name="file"; filename="document.pdf"
Content-Type: application/pdf

< ./test-document.pdf
------WebKitFormBoundary--

### Approve Leave Request
PUT {{baseUrl}}/api/leave/approve/1
Authorization: Bearer {{token}}

### Reject Leave Request
PUT {{baseUrl}}/api/leave/reject/1
Authorization: Bearer {{token}}

### Download Leave Attachment
GET {{baseUrl}}/api/leave/attachment/document.pdf
Authorization: Bearer {{token}}

### ============================================
### 5. REPORT ENDPOINTS (Requires Auth)
### ============================================

### Generate Attendance Report - PDF (All)
GET {{baseUrl}}/api/reports/attendance/pdf
Authorization: Bearer {{token}}

### Generate Attendance Report - PDF (Filtered)
GET {{baseUrl}}/api/reports/attendance/pdf?internName=John&department=ICT
Authorization: Bearer {{token}}

### Generate Attendance Report - Excel (All)
GET {{baseUrl}}/api/reports/attendance/excel
Authorization: Bearer {{token}}

### Generate Attendance Report - Excel (Filtered)
GET {{baseUrl}}/api/reports/attendance/excel?internName=John&department=ICT&field=Digital
Authorization: Bearer {{token}}

### ============================================
### 6. DEPARTMENT ENDPOINTS (Requires Auth)
### ============================================

### Get All Departments
GET {{baseUrl}}/api/departments
Authorization: Bearer {{token}}

### Create Department
POST {{baseUrl}}/api/departments
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "New Department"
}

### Delete Department
DELETE {{baseUrl}}/api/departments/1
Authorization: Bearer {{token}}

### ============================================
### 7. SUPERVISOR ENDPOINTS (Requires Auth)
### ============================================

### Get All Supervisors
GET {{baseUrl}}/api/supervisors
Authorization: Bearer {{token}}

### Get Supervisor by ID
GET {{baseUrl}}/api/supervisors/1
Authorization: Bearer {{token}}

### Create Supervisor
POST {{baseUrl}}/api/supervisors
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "New Supervisor",
  "email": "newsupervisor@univen.ac.za",
  "departmentId": 1
}

### Delete Supervisor
DELETE {{baseUrl}}/api/supervisors/1
Authorization: Bearer {{token}}

### ============================================
### 8. ADMIN ENDPOINTS (Requires Auth)
### ============================================

### Get All Admins
GET {{baseUrl}}/api/admins
Authorization: Bearer {{token}}

### Get Admin by ID
GET {{baseUrl}}/api/admins/1
Authorization: Bearer {{token}}

### ============================================
### ERROR TESTING
### ============================================

### Test Invalid Login (Wrong Password)
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "admin@univen.ac.za",
  "password": "WrongPassword123!"
}

### Test Invalid Login (Non-existent User)
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "nonexistent@univen.ac.za",
  "password": "Password123!"
}

### Test Unauthorized Access (No Token)
GET {{baseUrl}}/api/interns

### Test Invalid Token
GET {{baseUrl}}/api/interns
Authorization: Bearer invalid_token_here

### Test Missing Fields
POST {{baseUrl}}/api/auth/register
Content-Type: application/json

{
  "username": "test@univen.ac.za"
}

### ============================================
### SWAGGER API DOCUMENTATION
### ============================================

### Access Swagger UI
GET {{baseUrl}}/swagger-ui/index.html

### Access OpenAPI JSON
GET {{baseUrl}}/v3/api-docs

